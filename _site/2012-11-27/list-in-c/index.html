<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<title>经典数据结构之链表_指间世界</title>
<link rel="stylesheet" type="text/css" href="/theme/default/css/style.css" />
<link rel="stylesheet" type="text/css" href="/theme/default/css/syntax.css" />
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/wukezhan">
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>
</head>

<body>


<!--[top]-->
<div id="logo">
	<span id="saying">中原王气久消磨，四面军声逼楚歌。仗剑纵横驱虏骑，不教荆棘没铜驼！</span>
	<h1><a href="/">指间世界</a></h1>
</div>
<!--[/top]-->




<div id="wrapper">
    <div id="content">
        <h2 id="post-title">经典数据结构之链表</h2>
        <div id="post-info">
            <span class="post-tags">
                 
                <a class="tag" href="/tag/c/">c</a>
                 
                <a class="tag" href="/tag/list/">list</a>
                
            </span>
            <span class="post-categories">
                 
                <a class="category" href="/category/code/">code</a>
                
            </span>
            <div class="highlight">
                <pre style="padding:5px 20px;">   <code class="php">$author = "<span class="author"><a href="http://www.wukezhan.com" style="color:green;">湛之</a></span>"; <span class="cm">//@since: 2012-11-27</span></code></pre>
            </div>
        </div>
        <div class="post">
            <h3>list in c</h3>

<div class="highlight"><pre><code class="c"><span class="lineno"> 1</span> <span class="cp">    #include&lt;stdio.h&gt;</span>
<span class="lineno"> 2</span> <span class="cp">    #include&lt;stdlib.h&gt;</span>
<span class="lineno"> 3</span> <span class="cp">    #include&lt;malloc.h&gt;</span>
<span class="lineno"> 4</span>     
<span class="lineno"> 5</span>     <span class="k">typedef</span> <span class="kt">int</span> <span class="n">DataType</span><span class="p">;</span>
<span class="lineno"> 6</span>     <span class="k">typedef</span> <span class="k">struct</span> <span class="n">PNode</span><span class="p">{</span><span class="c1">//此处PNode为结构名</span>
<span class="lineno"> 7</span>         <span class="n">DataType</span> <span class="n">data</span><span class="p">;</span>
<span class="lineno"> 8</span>         <span class="k">struct</span> <span class="n">PNode</span> <span class="o">*</span><span class="n">prev</span><span class="p">;</span>
<span class="lineno"> 9</span>         <span class="k">struct</span> <span class="n">PNode</span> <span class="o">*</span><span class="n">next</span><span class="p">;</span>
<span class="lineno">10</span>     <span class="p">}</span> <span class="n">Node</span><span class="p">;</span><span class="c1">//Node为类型名</span>
<span class="lineno">11</span>     
<span class="lineno">12</span>     <span class="n">Node</span> <span class="o">*</span><span class="n">init</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="n">node</span><span class="p">);</span>
<span class="lineno">13</span>     <span class="n">Node</span> <span class="o">*</span><span class="n">insert</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="n">node</span><span class="p">,</span> <span class="n">DataType</span> <span class="n">data</span><span class="p">);</span>
<span class="lineno">14</span>     <span class="n">Node</span> <span class="o">*</span><span class="n">delete</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="n">node</span><span class="p">,</span> <span class="n">DataType</span> <span class="n">data</span><span class="p">);</span>
<span class="lineno">15</span>     <span class="kt">void</span> <span class="n">print_list</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="n">node</span><span class="p">);</span>
<span class="lineno">16</span>     
<span class="lineno">17</span>     <span class="n">Node</span><span class="o">*</span> <span class="nf">init</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="n">node</span><span class="p">)</span>
<span class="lineno">18</span>     <span class="p">{</span>
<span class="lineno">19</span>         <span class="k">if</span><span class="p">(</span><span class="n">node</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">){</span>
<span class="lineno">20</span>             <span class="cm">/**</span>
<span class="lineno">21</span> <span class="cm">             * malloc 向系统申请 sizeof(Node) 大小的内存空间</span>
<span class="lineno">22</span> <span class="cm">             * 返回类型为 void* 未确定类型指针，故须按需强制转换为Node*型指针</span>
<span class="lineno">23</span> <span class="cm">             */</span>
<span class="lineno">24</span>             <span class="n">node</span> <span class="o">=</span> <span class="p">(</span><span class="n">Node</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">Node</span><span class="p">));</span>
<span class="lineno">25</span>             <span class="n">node</span><span class="o">-&gt;</span><span class="n">prev</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="lineno">26</span>             <span class="n">node</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="lineno">27</span>         <span class="p">}</span>
<span class="lineno">28</span>         <span class="k">return</span> <span class="n">node</span><span class="p">;</span>
<span class="lineno">29</span>     <span class="p">}</span>
<span class="lineno">30</span>     
<span class="lineno">31</span>     <span class="n">Node</span><span class="o">*</span> <span class="nf">insert</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="n">node</span><span class="p">,</span> <span class="n">DataType</span> <span class="n">data</span><span class="p">)</span>
<span class="lineno">32</span>     <span class="p">{</span>
<span class="lineno">33</span>         <span class="n">Node</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="lineno">34</span>         <span class="k">if</span><span class="p">(</span><span class="n">node</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">){</span>
<span class="lineno">35</span>             <span class="n">node</span> <span class="o">=</span> <span class="p">(</span><span class="n">Node</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">Node</span><span class="p">));</span>
<span class="lineno">36</span>             <span class="n">node</span><span class="o">-&gt;</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">;</span>
<span class="lineno">37</span>             <span class="n">node</span><span class="o">-&gt;</span><span class="n">prev</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="lineno">38</span>             <span class="n">node</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="lineno">39</span>             <span class="n">p</span> <span class="o">=</span> <span class="n">node</span><span class="p">;</span>
<span class="lineno">40</span>         <span class="p">}</span><span class="k">else</span><span class="p">{</span>
<span class="lineno">41</span>             <span class="n">p</span> <span class="o">=</span> <span class="p">(</span><span class="n">Node</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">Node</span><span class="p">));</span>
<span class="lineno">42</span>             <span class="n">p</span><span class="o">-&gt;</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">;</span>
<span class="lineno">43</span>             <span class="n">p</span><span class="o">-&gt;</span><span class="n">prev</span> <span class="o">=</span> <span class="n">node</span><span class="p">;</span>
<span class="lineno">44</span>             <span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="lineno">45</span>             <span class="n">node</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
<span class="lineno">46</span>         <span class="p">}</span>
<span class="lineno">47</span>         <span class="k">return</span> <span class="n">p</span><span class="p">;</span>
<span class="lineno">48</span>     <span class="p">}</span>
<span class="lineno">49</span>     
<span class="lineno">50</span>     <span class="kt">void</span> <span class="nf">print_list</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="n">node</span><span class="p">)</span>
<span class="lineno">51</span>     <span class="p">{</span>
<span class="lineno">52</span>         <span class="k">while</span><span class="p">(</span><span class="n">node</span><span class="p">){</span>
<span class="lineno">53</span>             <span class="k">if</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">prev</span><span class="p">){</span>
<span class="lineno">54</span>                 <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">);</span>
<span class="lineno">55</span>             <span class="p">}</span>
<span class="lineno">56</span>             <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
<span class="lineno">57</span>         <span class="p">}</span>
<span class="lineno">58</span>     <span class="p">}</span>
<span class="lineno">59</span>     
<span class="lineno">60</span>     <span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="lineno">61</span>     <span class="p">{</span>
<span class="lineno">62</span>         <span class="n">Node</span> <span class="o">*</span><span class="n">list</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="lineno">63</span>         <span class="n">list</span> <span class="o">=</span> <span class="n">init</span><span class="p">(</span><span class="n">list</span><span class="p">);</span>
<span class="lineno">64</span>         <span class="n">Node</span> <span class="o">*</span><span class="n">head</span> <span class="o">=</span> <span class="n">list</span><span class="p">;</span>
<span class="lineno">65</span>         <span class="kt">int</span> <span class="n">wait_input</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="lineno">66</span>         <span class="kt">char</span> <span class="n">input</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
<span class="lineno">67</span>         <span class="kt">int</span> <span class="n">data</span><span class="p">;</span>
<span class="lineno">68</span>         <span class="k">while</span><span class="p">(</span><span class="n">wait_input</span><span class="p">){</span>
<span class="lineno">69</span>             <span class="n">printf</span><span class="p">(</span><span class="s">&quot;input the data of node: &quot;</span><span class="p">);</span>
<span class="lineno">70</span>             <span class="n">gets</span><span class="p">(</span><span class="n">input</span><span class="p">);</span>
<span class="lineno">71</span>             <span class="n">data</span> <span class="o">=</span> <span class="n">atoi</span><span class="p">(</span><span class="n">input</span><span class="p">);</span>
<span class="lineno">72</span>             <span class="k">if</span><span class="p">(</span><span class="n">data</span><span class="p">){</span>
<span class="lineno">73</span>                 <span class="n">list</span> <span class="o">=</span> <span class="n">insert</span><span class="p">(</span><span class="n">list</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
<span class="lineno">74</span>             <span class="p">}</span><span class="k">else</span><span class="p">{</span>
<span class="lineno">75</span>                 <span class="n">wait_input</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="lineno">76</span>             <span class="p">}</span>
<span class="lineno">77</span>         <span class="p">}</span>                                 
<span class="lineno">78</span>     
<span class="lineno">79</span>         <span class="n">print_list</span><span class="p">(</span><span class="n">head</span><span class="p">);</span>
<span class="lineno">80</span>         <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="lineno">81</span>     <span class="p">}</span>
<span class="lineno">82</span>     
</code></pre>
</div>




            <p><span class="split-line" style="color:red;">---EOF---</span></p>
<p>
	<span class="license" style="color:green;font-weight:bold;">Code licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License v2.0</a>, article under <a href="http://creativecommons.org/licenses/by/3.0/" target="_blank">CC BY 3.0</a>.</span>
</p>
        </div>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
        (function() {
         var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
         dsq.src = 'http://wukezhan.disqus.com/embed.js';
         (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=wukezhan">comments powered by Disqus.</a></noscript>
    </div>
</div>


<!--[footer]-->
<div id="footer">
	<div id="feed">
		<div class="badget" id="github">
			<a href="http://github.com/wukezhan">
			<span class="service">github</span>
			<span class="info"> </span>
			</a>
		</div>
		<div class="badget" id="twt">
			<a href="http://twitter.com/wukezhan">
			<span class="service">twitter</span>
			<span class="info"> </span>
			</a>
		</div>
		<div class="badget" id="feedburner">
			<a href="http://feeds.feedburner.com/wukezhan">
			<span class="service">rss</span>
			<span class="info"> </span>
			</a>
		</div>
	</div>
	<span style="color:#bbb;font-size:12px">copyright © www.wukezhan.com.</span>
	<p style="clear:both"></p>
</div>
<!--[/footer]-->
<script type="text/javascript" src="/theme/default/js/footer.js"></script>

<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-16656304-1']);
_gaq.push(['_trackPageview']);

(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
</body>
</html>