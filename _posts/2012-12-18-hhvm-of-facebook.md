---
layout: post
title: facebook神器HHVM体验
category: php
tags: [ php, HHVM, nginx  ]
published: false
---

###HHVM简介
hiphop是facebook开源的一个php的执行引擎。

hiphop最初采取了一种名叫“HPHPc”形式来工作，即把php代码“翻译”成C++代码，然后将其传递给gcc编译成一个单一的二进制文件，这带来了显著的性能提升，但是也给网站的迭代开发、部署带来了极大的不便。毕竟，之所以要使用php，部分原因就是为了避免为哪怕一点点的改动而重新编译代码。而且由于要使用gcc进行编译的原因，而不得不简单的将eval()等动态特性丢弃掉。

不久一个基于AST、名为“HPHPi”的可交互的HPHP解释器出现了。这提供了开发人员所期望的改动即自动重新编译的特性，但这需要一个相当恶心的、导致在开发与生产环境中行为略有不同的修改。

HHVM即是为了取代这两者而创建的。与这两者不同的是，HHVM不需要显示的调用gcc以生成转换后的代码。相反，除了将PHP脚本编译成字节码并在一个虚拟机环境运行这些字节码之外，HHVM的工作方式与普通的PHP并没有什么不同。

当然，如果仅此而已，那么HHVM也就仅仅是比普通的PHP性能更高而已（由于其优化）。HHVM的牛逼之处在于，当其以生产模式运行时，有一系列额外的选项使其启用即时编译，以将字节码转换成原生的机器码。

以这种方式，一个单一的HHVM一方面可以执行高性能的生产引擎（HPHPc），另一方面又同时保持了灵活的开发引擎（HPHPi）。

